<div class="table-container">
    <table class="spaced-table">
        <tr>
            <th rowspan="2">ID</th>
            <th rowspan="2">Avatar</th>
            <th rowspan="2">Display Name</th>
            <th rowspan="2">Bio</th>
            <th rowspan="2">Actions</th>
            <th colspan="<?= count(${basename(__FILE__, '.phtml') . '_roles'}) ?>" dir="ltr">Roles</th>
        </tr>
        <tr>
            <?php for ($i = 0; $i < count(${basename(__FILE__, '.phtml') . '_roles'}); $i++): ?>
                <th class="role-header"
                    style="background-color: #<?= ${basename(__FILE__, '.phtml') . '_roles'}[$i]->color ?>;" dir="ltr">
                    <?= ${basename(__FILE__, '.phtml') . '_roles'}[$i]->name ?>
                </th>
            <?php endfor; ?>
        </tr>
        <?php foreach (${basename(__FILE__, '.phtml') . '_accounts'} as $user): ?>
            <tr data-user-id="<?= $user->getId() ?>">
                <td class="userinfo"><?= $user->getId() ?></td>
                <td><img class="avatar" src="<?= $user->getAvatarLink() ?>"
                        onerror="this.onerror=null; this.src='<?= $user->getDefaultAvatarUrl() ?>'" alt="Profile picture"
                        loading="lazy" /></td>
                <td class="userinfo"><?= $user->getName() ?></td>
                <td class="userinfo txt-l"><a href="/cast/<?= $user->getId() ?>#bio" target="_blank">Bio User
                        <?= $user->getId() ?></a></td>
                <td class="buttons-column">
                    <span class="reset-password-link"><button class="resetpasswordbtn" class="lb-a">Reset
                            Password</button></span>
                    <a class="manage-account-link btn manageaccbtn" href="/account/<?= $user->getId() ?>">Manage Account</a>
                    <span class="clear-bio-link"><button class="clearbiobtn" class="lb-a">Clear Bio</button></span>
                    <span class="clear-avatar-link"><button class="clearavatarbtn" class="lb-a">Clear Avatar</button></span>
                    <span class="delete-account-link"><button class="deletebtn">Delete account</button></span>
                </td>
                <?php for ($i = 0; $i < count(${basename(__FILE__, '.phtml') . '_roles'}); $i++): ?>
                    <td class="role-column"
                        style="background-color: #<?= ${basename(__FILE__, '.phtml') . '_roles'}[$i]->color ?>">
                        <input type="checkbox" <?= $user->hasRole(${basename(__FILE__, '.phtml') . '_roles'}[$i]->name) ? 'checked' : '' ?> data-role-id="<?= ${basename(__FILE__, '.phtml') . '_roles'}[$i]->getId() ?>"
                            class="checkbox-large">
                    </td>
                <?php endfor; ?>
            </tr>
        <?php endforeach; ?>
    </table>
</div>