<?php foreach (${basename(__FILE__, '.phtml').'_quests'} as $quest) : ?>
<section data-quest-id="<?= $quest->getId() ?>" class="txt-c">
	<h3 class="txt-c"><?= htmlspecialchars($quest->getName(), ENT_QUOTES, 'UTF-8') ?></h3>
	<table class="table-npc-management">
		<tr>
			<th>Rearrange</th><th>NPC</th><th>Voice actor</th><th>Recordings</th><th>Action</th>
		</tr>
	<?php foreach ($quest->getNpcs() as $npc) : ?>
		<tr data-npc-id="<?= $npc->getId() ?>">
            <td>
                <button class="rearrange-up-btn">ðŸ”¼</button>
                <br>
                <button class="rearrange-down-btn">ðŸ”½</button>
            </td>
			<td class="width-150"><a href="contents/npc/<?= $npc->getId() ?>" class="npc-name"><?= htmlspecialchars($npc->getName(), ENT_QUOTES, 'UTF-8') ?></a></td>
			<?php if ($npc->getVoiceActor() === null) : ?>
				<td class="width-150"><i>Nobody</i></td>
			<?php else : ?>
                <td class="width-150"><a href="cast/<?= $npc->getVoiceActor()->getId() ?>" class="va-name"><?= htmlspecialchars($npc->getVoiceActor()->getName(), ENT_QUOTES, 'UTF-8') ?></a></td>
			<?php endif ?>
            <td><?= $npc->getRecordingsCount() ?></td>
			<td><b><a id="managelink" href="administration/npcs/manage/<?= $npc->getId() ?>" class="width-150">Manage</a></b></td>
		</tr>
	<?php endforeach ?>
	</table><hr class="hr-f">
</section>
<?php endforeach ?>